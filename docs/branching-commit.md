# Branching / Commit Rules（必須）

---

## ブランチ運用
- 変更は必ずブランチで行う（main/master直コミット禁止）
- 1ブランチ = 1目的（機能/修正単位）
- 作業終了後はブランチ破棄前提（長命ブランチを作らない）
- 取り込みはPR経由（自己レビューでもPR作成は必須）

---

## ブランチ命名規則
形式:
- `<type>/<short-slug>`

type（推奨）:
- feat: 機能追加
- fix: バグ修正
- refactor: 挙動不変の整理
- chore: 雑務（設定/ドキュメント等）
- test: テスト追加/修正

slugルール:
- 小文字、単語は `-` 区切り
- 3〜6語程度を目安に短く
- 個人名・秘密情報・顧客固有値を入れない

例:
- `feat/add-report-filter`
- `fix/login-redirect`
- `chore/update-readme`

---

## Issueがある場合（必須）
形式:
- `<type>/issue-<番号>-<short-slug>`

例:
- `feat/issue-123-add-embed-page`
- `fix/issue-45-handle-expired-sso`

Issueが指定されているのに `issue-<番号>` を入れないのは禁止（運用が決まったらこの規則に統一）。

---

## コミットメッセージ（日本語必須）
- タイトル・本文とも日本語
- 秘密情報（URL/トークン/顧客名等）を書かない

推奨フォーマット:
- 1行目: 要約（50文字目安、命令形）
- 2行目: 空行
- 3行目以降: 理由/背景/影響/注意点（必要な場合）

書き方の指針:
- 変更対象と目的が分かる言葉を入れる（「修正」だけは禁止）
- 命令形で統一（例: 「追加する」「修正する」「防止する」）
- 秘密情報を絶対に含めない

良い例:
- `埋め込みレポートの表示ページを追加する`
- `SSOトークン期限切れ時のエラー表示を改善する`
- `購入分析の集計クエリを最適化する`
- `テスト用のDBフィクスチャを追加する`

悪い例:
- `update`
- `fix bug`
- `URLやトークンを貼る`

---

## Issue参照（推奨）
Issueがある場合、コミット本文に参照を書く（秘密情報は書かない）:
- 例: `Issue: #123`
